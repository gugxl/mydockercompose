services:
  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: open-webui
    ports:
      - "3001:8080"
    environment:
      # 关键：告诉 Open-WebUI 使用宿主机（Windows）上的 Ollama 服务
      - OLLAMA_BASE_URL=http://host.docker.internal:11434
      # 你可以自定义 Open-WebUI 的存储路径（在容器内部仍是 /app/backend/data）
      - WEBUI_NAME=Open-WebUI
    extra_hosts:
      - "host.docker.internal:host-gateway"
    volumes:
      - open-webui-data:/app/backend/data
    restart: "no"  # 不自动重启，按你要求关闭自动启动

volumes:
  open-webui-data:
